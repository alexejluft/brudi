---
import Layout from '../layouts/Layout.astro';
---

<Layout title="brudi.dev ‚Äî TypeScript">
  <main class="max-w-4xl mx-auto px-6 py-16">
    
    <header class="mb-16">
      <a href="/" class="text-zinc-500 hover:text-zinc-300 text-sm mb-4 inline-block">‚Üê Zur√ºck</a>
      <h1 class="text-4xl font-bold mb-2 page-title">
        Type<span class="text-blue-500">Script</span>
      </h1>
      <p class="text-zinc-400">
        Utility Types & Patterns die ich t√§glich nutze.
      </p>
    </header>

    <!-- Utility Types -->
    <section class="mb-16">
      <h2 class="text-2xl font-semibold mb-6 text-zinc-200">
        Utility Types
        <span class="text-sm font-normal text-zinc-500 ml-2">Built-in Power</span>
      </h2>

      <!-- Partial -->
      <article class="mb-8 bg-zinc-900/50 border border-zinc-800 rounded-xl p-6">
        <h3 class="text-lg font-medium mb-2 text-blue-400">Partial&lt;T&gt;</h3>
        <p class="text-zinc-400 text-sm mb-4">
          Macht alle Properties optional. Perfekt f√ºr Update-Funktionen.
        </p>
        <pre class="text-sm overflow-x-auto"><code class="text-zinc-300">interface User {'{'}
  id: string;
  name: string;
  email: string;
{'}'}

// Nur die Felder die sich √§ndern
function updateUser(id: string, updates: Partial&lt;User&gt;) {'{'}
  // ...
{'}'}

updateUser('123', {'{'} name: 'Alex' {'}'}); // ‚úÖ Valid</code></pre>
      </article>

      <!-- Pick & Omit -->
      <article class="mb-8 bg-zinc-900/50 border border-zinc-800 rounded-xl p-6">
        <h3 class="text-lg font-medium mb-2 text-green-400">Pick&lt;T, K&gt; & Omit&lt;T, K&gt;</h3>
        <p class="text-zinc-400 text-sm mb-4">
          Erstellt Types mit nur bestimmten Properties (Pick) oder ohne bestimmte (Omit).
        </p>
        <pre class="text-sm overflow-x-auto"><code class="text-zinc-300">// Nur id und name
type UserPreview = Pick&lt;User, 'id' | 'name'&gt;;

// Alles au√üer id (f√ºr Create)
type CreateUserInput = Omit&lt;User, 'id'&gt;;

// Kombiniert: API Response
type UserListResponse = ApiResponse&lt;Pick&lt;User, 'id' | 'name'&gt;[]&gt;;</code></pre>
      </article>

      <!-- Record -->
      <article class="mb-8 bg-zinc-900/50 border border-zinc-800 rounded-xl p-6">
        <h3 class="text-lg font-medium mb-2 text-purple-400">Record&lt;K, T&gt;</h3>
        <p class="text-zinc-400 text-sm mb-4">
          Dictionary-√§hnliche Strukturen mit definierten Key- und Value-Types.
        </p>
        <pre class="text-sm overflow-x-auto"><code class="text-zinc-300">// String Keys ‚Üí User Arrays
type UsersByRole = Record&lt;string, User[]&gt;;

// Enum Keys ‚Üí spezifische Values
type StatusColors = Record&lt;Status, string&gt;;

const colors: StatusColors = {'{'}
  pending: '#f59e0b',
  active: '#10b981',
  error: '#ef4444',
{'}'};</code></pre>
      </article>

      <!-- Required & Readonly -->
      <article class="mb-8 bg-zinc-900/50 border border-zinc-800 rounded-xl p-6">
        <h3 class="text-lg font-medium mb-2 text-orange-400">Required&lt;T&gt; & Readonly&lt;T&gt;</h3>
        <pre class="text-sm overflow-x-auto"><code class="text-zinc-300">interface Config {'{'}
  host?: string;
  port?: number;
{'}'}

// Alle Properties required
const defaults: Required&lt;Config&gt; = {'{'}
  host: 'localhost',
  port: 3000,
{'}'};

// Alle Properties readonly (immutable)
const frozen: Readonly&lt;Config&gt; = {'{'} host: 'prod' {'}'};
frozen.host = 'dev'; // ‚ùå Error!</code></pre>
      </article>
    </section>

    <!-- Practical Patterns -->
    <section class="mb-16">
      <h2 class="text-2xl font-semibold mb-6 text-zinc-200">
        Praktische Patterns
      </h2>

      <!-- API Response -->
      <article class="mb-8 bg-zinc-900/50 border border-zinc-800 rounded-xl p-6">
        <h3 class="text-lg font-medium mb-2">API Response Wrapper</h3>
        <pre class="text-sm overflow-x-auto"><code class="text-zinc-300">interface ApiResponse&lt;T&gt; {'{'}
  data: T;
  status: number;
  message: string;
{'}'}

// Typisierte Responses
type UsersResponse = ApiResponse&lt;User[]&gt;;
type UserResponse = ApiResponse&lt;User&gt;;

async function fetchUsers(): Promise&lt;UsersResponse&gt; {'{'}
  // ...
{'}'}</code></pre>
      </article>

      <!-- Discriminated Unions -->
      <article class="mb-8 bg-zinc-900/50 border border-zinc-800 rounded-xl p-6">
        <h3 class="text-lg font-medium mb-2">Discriminated Unions</h3>
        <p class="text-zinc-400 text-sm mb-4">
          Type-safe State Management mit automatischem Narrowing.
        </p>
        <pre class="text-sm overflow-x-auto"><code class="text-zinc-300">type RequestState&lt;T&gt; =
  | {'{'} status: 'idle' {'}'}
  | {'{'} status: 'loading' {'}'}
  | {'{'} status: 'success'; data: T {'}'}
  | {'{'} status: 'error'; error: string {'}'};

function render(state: RequestState&lt;User[]&gt;) {'{'}
  switch (state.status) {'{'}
    case 'loading':
      return &lt;Spinner /&gt;;
    case 'success':
      return &lt;List data={'{'}state.data{'}'} /&gt;; // ‚úÖ data ist hier verf√ºgbar
    case 'error':
      return &lt;Error msg={'{'}state.error{'}'} /&gt;;
  {'}'}
{'}'}</code></pre>
      </article>

      <!-- Type Guards -->
      <article class="mb-8 bg-zinc-900/50 border border-zinc-800 rounded-xl p-6">
        <h3 class="text-lg font-medium mb-2">Type Guards</h3>
        <pre class="text-sm overflow-x-auto"><code class="text-zinc-300">function isUser(obj: unknown): obj is User {'{'}
  return (
    typeof obj === 'object' &&
    obj !== null &&
    'id' in obj &&
    'name' in obj
  );
{'}'}

// Jetzt ist TypeScript schlau
if (isUser(data)) {'{'}
  console.log(data.name); // ‚úÖ Kein Error
{'}'}</code></pre>
      </article>
    </section>

    <!-- Key Insight -->
    <section class="mb-16 p-6 bg-blue-500/10 border border-blue-500/30 rounded-xl">
      <h3 class="text-blue-400 font-medium mb-2">üí° Key Insight</h3>
      <p class="text-zinc-300">
        Utility Types existieren <strong>nur zur Compile-Zeit</strong>. 
        Sie haben <strong>zero runtime cost</strong> ‚Äî nach dem Build ist kein TypeScript Code mehr da.
      </p>
    </section>

    <nav class="flex gap-4 pt-8 border-t border-zinc-800">
      <a href="/patterns" class="text-blue-400 hover:text-blue-300">‚Üê Patterns</a>
      <a href="/" class="text-blue-400 hover:text-blue-300 ml-auto">Home ‚Üí</a>
    </nav>

  </main>
</Layout>
