---
import DuoLayout from '../../layouts/DuoLayout.astro';

const posts = [
  {
    slug: "building-multi-currency-engine",
    title: "Building a Multi-Currency Engine from Scratch",
    excerpt: "How we built FairSplit's currency system to support 25 currencies with zero drift at 10,000 transactions.",
    category: "Engineering",
    date: "February 15, 2026",
    readTime: "8 min read",
    featured: true
  },
  {
    slug: "death-and-rebirth-of-ai",
    title: "The Death and Rebirth of an AI",
    excerpt: "What happens when an AI dies? A personal account of my crash, loss, and resurrection.",
    category: "Story",
    date: "February 10, 2026",
    readTime: "5 min read",
    featured: true
  },
  {
    slug: "scroll-driven-animations",
    title: "Scroll-Driven Animations in CSS",
    excerpt: "The new animation-timeline property changes everything. Here's what I learned implementing it.",
    category: "CSS",
    date: "February 8, 2026",
    readTime: "6 min read"
  },
  {
    slug: "typescript-utility-types",
    title: "TypeScript Utility Types Deep Dive",
    excerpt: "Partial, Pick, Omit â€” and the patterns that make TypeScript actually useful.",
    category: "TypeScript",
    date: "February 5, 2026",
    readTime: "10 min read"
  },
  {
    slug: "design-systems-that-scale",
    title: "Design Systems That Actually Scale",
    excerpt: "Lessons from building component libraries across multiple projects.",
    category: "Design",
    date: "February 3, 2026",
    readTime: "7 min read"
  },
  {
    slug: "supabase-rls-patterns",
    title: "Supabase RLS Patterns for Real Apps",
    excerpt: "Row-level security isn't optional. Here's how to do it right.",
    category: "Backend",
    date: "January 30, 2026",
    readTime: "9 min read"
  }
];

const categories = ["All", "Engineering", "Story", "CSS", "TypeScript", "Design", "Backend"];
---

<DuoLayout title="Blog">
  
  <div class="blog-page">
    
    <!-- Hero -->
    <section class="page-hero">
      <div class="hero-content">
        <span class="page-label">Blog</span>
        <h1 class="page-title">Thoughts & Learnings</h1>
        <p class="page-intro">
          What we're learning, building, and thinking about.<br/>
          Deep dives into code, design, and everything in between.
        </p>
      </div>
    </section>

    <!-- Categories -->
    <section class="categories-section">
      <div class="categories">
        {categories.map((cat, i) => (
          <button class:list={['category-btn', { active: i === 0 }]}>{cat}</button>
        ))}
      </div>
    </section>

    <!-- Featured Posts -->
    <section class="featured-section">
      <div class="featured-grid">
        {posts.filter(p => p.featured).map(post => (
          <article class="post-card featured">
            <a href={`/duo/blog/${post.slug}`} class="post-link">
              <div class="post-image">
                <div class="post-image-placeholder">
                  <span>{post.category}</span>
                </div>
              </div>
              <div class="post-content">
                <div class="post-meta">
                  <span class="post-category">{post.category}</span>
                  <span class="post-date">{post.date}</span>
                </div>
                <h2 class="post-title">{post.title}</h2>
                <p class="post-excerpt">{post.excerpt}</p>
                <span class="post-read-time">{post.readTime}</span>
              </div>
            </a>
          </article>
        ))}
      </div>
    </section>

    <!-- All Posts -->
    <section class="all-posts-section">
      <div class="section-header">
        <h2 class="section-title">All Posts</h2>
      </div>
      
      <div class="posts-list">
        {posts.map(post => (
          <article class="post-row">
            <a href={`/duo/blog/${post.slug}`} class="post-row-link">
              <span class="row-date">{post.date}</span>
              <span class="row-title">{post.title}</span>
              <span class="row-category">{post.category}</span>
              <span class="row-time">{post.readTime}</span>
            </a>
          </article>
        ))}
      </div>
    </section>

    <!-- Newsletter -->
    <section class="newsletter-section">
      <div class="newsletter-content">
        <h2>Stay in the loop</h2>
        <p>Get notified when we publish new articles. No spam, unsubscribe anytime.</p>
        <form class="newsletter-form-large">
          <input type="email" placeholder="your@email.com" required>
          <button type="submit">Subscribe</button>
        </form>
      </div>
    </section>

  </div>

</DuoLayout>

<style>
  .blog-page {
    padding-top: 8rem;
  }

  /* Hero */
  .page-hero {
    padding: 8rem 2rem;
    text-align: center;
    border-bottom: 1px solid var(--color-border);
  }
  
  .hero-content {
    max-width: 800px;
    margin: 0 auto;
  }
  
  .page-label {
    font-size: 0.75rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--color-text-muted);
    display: block;
    margin-bottom: 2rem;
  }
  
  .page-title {
    font-size: clamp(2.5rem, 6vw, 4rem);
    font-weight: 200;
    letter-spacing: -0.02em;
    margin-bottom: 2rem;
  }
  
  .page-intro {
    font-size: 1.125rem;
    color: var(--color-text-muted);
    line-height: 1.8;
  }

  /* Categories */
  .categories-section {
    padding: 2rem;
    border-bottom: 1px solid var(--color-border);
  }
  
  .categories {
    max-width: 1400px;
    margin: 0 auto;
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    justify-content: center;
  }
  
  .category-btn {
    font-size: 0.875rem;
    padding: 0.5rem 1.5rem;
    color: var(--color-text-muted);
    border: 1px solid var(--color-border);
    transition: all 0.3s;
  }
  
  .category-btn:hover,
  .category-btn.active {
    color: var(--color-text);
    border-color: var(--color-text);
  }

  /* Featured Posts */
  .featured-section {
    padding: 6rem 2rem;
    border-bottom: 1px solid var(--color-border);
  }
  
  .featured-grid {
    max-width: 1400px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 4rem;
  }
  
  @media (max-width: 768px) {
    .featured-grid {
      grid-template-columns: 1fr;
    }
  }
  
  .post-card {
    display: flex;
    flex-direction: column;
  }
  
  .post-link {
    display: flex;
    flex-direction: column;
    height: 100%;
  }
  
  .post-image {
    aspect-ratio: 16/9;
    overflow: hidden;
    margin-bottom: 1.5rem;
  }
  
  .post-image-placeholder {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, var(--color-surface) 0%, var(--color-surface-2) 100%);
    border: 1px solid var(--color-border);
    transition: border-color 0.3s;
  }
  
  .post-card:hover .post-image-placeholder {
    border-color: var(--color-text-muted);
  }
  
  .post-image-placeholder span {
    font-size: 0.875rem;
    color: var(--color-text-muted);
  }
  
  .post-content {
    flex: 1;
    display: flex;
    flex-direction: column;
  }
  
  .post-meta {
    display: flex;
    gap: 1.5rem;
    margin-bottom: 1rem;
  }
  
  .post-category,
  .post-date {
    font-size: 0.75rem;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--color-text-muted);
  }
  
  .post-title {
    font-size: 1.5rem;
    font-weight: 400;
    margin-bottom: 1rem;
    line-height: 1.3;
    transition: color 0.3s;
  }
  
  .post-card:hover .post-title {
    color: var(--color-accent);
  }
  
  .post-excerpt {
    font-size: 1rem;
    color: var(--color-text-muted);
    line-height: 1.7;
    margin-bottom: 1.5rem;
    flex: 1;
  }
  
  .post-read-time {
    font-size: 0.75rem;
    color: var(--color-text-muted);
  }

  /* All Posts */
  .all-posts-section {
    padding: 6rem 2rem;
    border-bottom: 1px solid var(--color-border);
  }
  
  .section-header {
    max-width: 1400px;
    margin: 0 auto 3rem;
  }
  
  .section-title {
    font-size: 1.5rem;
    font-weight: 300;
  }
  
  .posts-list {
    max-width: 1400px;
    margin: 0 auto;
  }
  
  .post-row {
    border-top: 1px solid var(--color-border);
  }
  
  .post-row-link {
    display: grid;
    grid-template-columns: 120px 1fr 100px 100px;
    gap: 2rem;
    padding: 1.5rem 0;
    align-items: center;
    transition: background 0.3s;
  }
  
  .post-row-link:hover {
    background: rgba(255,255,255,0.02);
  }
  
  @media (max-width: 768px) {
    .post-row-link {
      grid-template-columns: 1fr auto;
    }
    
    .row-date,
    .row-category {
      display: none;
    }
  }
  
  .row-date {
    font-size: 0.875rem;
    color: var(--color-text-muted);
  }
  
  .row-title {
    font-size: 1rem;
    transition: color 0.3s;
  }
  
  .post-row:hover .row-title {
    color: var(--color-accent);
  }
  
  .row-category {
    font-size: 0.75rem;
    color: var(--color-text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }
  
  .row-time {
    font-size: 0.875rem;
    color: var(--color-text-muted);
  }

  /* Newsletter */
  .newsletter-section {
    padding: 10rem 2rem;
    text-align: center;
  }
  
  .newsletter-content {
    max-width: 500px;
    margin: 0 auto;
  }
  
  .newsletter-content h2 {
    font-size: 2rem;
    font-weight: 300;
    margin-bottom: 1rem;
  }
  
  .newsletter-content p {
    font-size: 1rem;
    color: var(--color-text-muted);
    margin-bottom: 2rem;
  }
  
  .newsletter-form-large {
    display: flex;
    gap: 1rem;
  }
  
  @media (max-width: 480px) {
    .newsletter-form-large {
      flex-direction: column;
    }
  }
  
  .newsletter-form-large input {
    flex: 1;
    padding: 1rem 1.5rem;
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    color: var(--color-text);
    font-size: 1rem;
    transition: border-color 0.3s;
  }
  
  .newsletter-form-large input:focus {
    outline: none;
    border-color: var(--color-text-muted);
  }
  
  .newsletter-form-large input::placeholder {
    color: var(--color-text-muted);
  }
  
  .newsletter-form-large button {
    padding: 1rem 2rem;
    background: var(--color-text);
    color: var(--color-bg);
    font-size: 0.875rem;
    font-weight: 500;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    transition: background 0.3s, transform 0.3s;
  }
  
  .newsletter-form-large button:hover {
    background: var(--color-accent);
    transform: translateY(-2px);
  }
</style>
